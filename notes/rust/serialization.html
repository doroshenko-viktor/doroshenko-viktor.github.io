<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Rust Serialization/Deserialization</title><link rel="icon" href="/images/favicon.ico"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/b65b5b41f2379875.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b65b5b41f2379875.css" data-n-g=""/><link rel="preload" href="/_next/static/css/0d9654b911e08999.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0d9654b911e08999.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-fc97f3f1282ce3ed.js" defer=""></script><script src="/_next/static/chunks/main-f4ae3437c92c1efc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-85d7488a393e293e.js" defer=""></script><script src="/_next/static/chunks/211-ca3cd870e26e881a.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5B...noteKey%5D-bc6552c3ae1e3718.js" defer=""></script><script src="/_next/static/AiqCeJW8wJ9834NTx9N_r/_buildManifest.js" defer=""></script><script src="/_next/static/AiqCeJW8wJ9834NTx9N_r/_ssgManifest.js" defer=""></script><script src="/_next/static/AiqCeJW8wJ9834NTx9N_r/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><section class="Layout_centeredSection__nmU9U"><ul class="NavigationBar_navbar__CBMoV"><li class="NavigationBar_navitem__LKB5F"><a class="NavigationBar_navitemContent__jEyWq" href="/">Home</a><span class="NavigationBar_separator__qvEVD">|</span></li><li class="NavigationBar_navitem__LKB5F"><button class="NavigationBar_navitemContent__jEyWq">Back</button><span class="NavigationBar_separator__qvEVD">|</span></li></ul><h1 class="NoteFormattedContent_noteTitle__Oi9sD">Rust Serialization/Deserialization</h1><article class="NoteFormattedContent_note__8cHeE">
<h2>Attributes</h2>
<h2>Container Attributes</h2>
<p>These are <code>serde</code> attributes placed on top of target struct.</p>
<ul>
  <li>
    <p>
      <code>#[serde(rename_all = "&#x3C;value>")]</code> - this attribute allows to specify format of <code>json</code> keys.
      Possible <code>&#x3C;value></code>s are:
    </p>
    <ul>
      <li><code>lowercase</code></li>
      <li><code>UPPERCASE</code></li>
      <li><code>PascalCase</code></li>
      <li><code>camelCase</code></li>
      <li><code>snake_case</code></li>
      <li><code>SCREAMING_SNAKE_CASE</code></li>
      <li><code>kebab-case</code></li>
      <li><code>SCREAMING-KEBAB-CASE</code></li>
    </ul>
    <pre><code class="hljs language-rust">  <span class="hljs-comment">//{</span>
  <span class="hljs-comment">//    \"someKey1\": \"v1\",</span>
  <span class="hljs-comment">//    \"someKey2\": 8</span>
  <span class="hljs-comment">//}</span>

  <span class="hljs-meta">#[derive(Deserialize, Serialize, Debug)]</span>
  <span class="hljs-meta">#[serde(rename_all = <span class="hljs-string">"camelCase"</span>)]</span>
  <span class="hljs-keyword">struct</span> <span class="hljs-title class_">T</span> {
      <span class="hljs-keyword">pub</span> some_key_1: <span class="hljs-type">String</span>,
      <span class="hljs-keyword">pub</span> some_key_2: <span class="hljs-type">u8</span>,
  }
</code></pre>
  </li>
</ul>
<h2>Field Attributes</h2>
<p>These are attributes, placed on fields of <code>structs</code> or <code>enum</code> variants:</p>
<ul>
  <li>
    <p>
      <strong>rename:</strong> - allows to rename some field on serialization/deserialization and separately
      for each of them:
    </p>
    <pre><code class="hljs language-rust">  <span class="hljs-meta">#[derive(Deserialize, Serialize, Debug)]</span>
  <span class="hljs-keyword">struct</span> <span class="hljs-title class_">T</span> {
      <span class="hljs-meta">#[serde(rename(serialize = <span class="hljs-string">"SERIALIZE_KEY"</span>, deserialize = <span class="hljs-string">"other_KEY"</span>))]</span>
      <span class="hljs-keyword">pub</span> some_key_1: <span class="hljs-type">String</span>,
      <span class="hljs-meta">#[serde(rename = <span class="hljs-string">"key2"</span>)]</span>
      <span class="hljs-keyword">pub</span> some_key_2: <span class="hljs-type">u8</span>,
  }

  <span class="hljs-keyword">let</span> <span class="hljs-keyword"></span><span class="hljs-variable">json</span> = <span class="hljs-string">"{
      \"other_KEY\": \"v1\",
      \"key2\": 8
  }"</span>;

  <span class="hljs-keyword">let</span> <span class="hljs-keyword"></span><span class="hljs-variable">t</span>: T = serde_json::<span class="hljs-title function_ invoke__">from_str</span>(&#x26;json)?;
  dbg!(&#x26;t);
  <span class="hljs-keyword">let</span> <span class="hljs-keyword"></span><span class="hljs-variable">serialized</span> = serde_json::<span class="hljs-title function_ invoke__">to_string</span>(&#x26;t)?;
  dbg!(&#x26;serialized);
  <span class="hljs-title function_ invoke__">Ok</span>(serialized)
</code></pre>
    <p>where <code>serialized</code> will be:</p>
    <pre><code class="hljs language-rust">{<span class="hljs-string">"SERIALIZE_KEY"</span>:<span class="hljs-string">"v1"</span>,<span class="hljs-string">"key2"</span>:<span class="hljs-number">8</span>}
</code></pre>
  </li>
  <li>
    <p>
      <strong>alias:</strong> - specifies possible alias for property name, but it leaves possibility to
      serialize/deserialize also with native Rust's struct field name.
    </p>
  </li>
  <li>
    <p>
      <strong>skip:</strong> - don't serialize/deserialize specified field. It has also more narrow <code>skip_serializing</code>
      and <code>skip_deserializing</code>.
    </p>
  </li>
</ul>
</article></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"noteKey":["rust","serialization"],"note":{"title":"Rust Serialization/Deserialization","date":"2022-03-03","content":"\n\u003ch2\u003eAttributes\u003c/h2\u003e\n\u003ch2\u003eContainer Attributes\u003c/h2\u003e\n\u003cp\u003eThese are \u003ccode\u003eserde\u003c/code\u003e attributes placed on top of target struct.\u003c/p\u003e\n\u003cul\u003e\n  \u003cli\u003e\n    \u003cp\u003e\n      \u003ccode\u003e#[serde(rename_all = \"\u0026#x3C;value\u003e\")]\u003c/code\u003e - this attribute allows to specify format of \u003ccode\u003ejson\u003c/code\u003e keys.\n      Possible \u003ccode\u003e\u0026#x3C;value\u003e\u003c/code\u003es are:\n    \u003c/p\u003e\n    \u003cul\u003e\n      \u003cli\u003e\u003ccode\u003elowercase\u003c/code\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ccode\u003eUPPERCASE\u003c/code\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ccode\u003ePascalCase\u003c/code\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ccode\u003ecamelCase\u003c/code\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ccode\u003esnake_case\u003c/code\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ccode\u003eSCREAMING_SNAKE_CASE\u003c/code\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ccode\u003ekebab-case\u003c/code\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ccode\u003eSCREAMING-KEBAB-CASE\u003c/code\u003e\u003c/li\u003e\n    \u003c/ul\u003e\n    \u003cpre\u003e\u003ccode class=\"hljs language-rust\"\u003e  \u003cspan class=\"hljs-comment\"\u003e//{\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e//    \\\"someKey1\\\": \\\"v1\\\",\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e//    \\\"someKey2\\\": 8\u003c/span\u003e\n  \u003cspan class=\"hljs-comment\"\u003e//}\u003c/span\u003e\n\n  \u003cspan class=\"hljs-meta\"\u003e#[derive(Deserialize, Serialize, Debug)]\u003c/span\u003e\n  \u003cspan class=\"hljs-meta\"\u003e#[serde(rename_all = \u003cspan class=\"hljs-string\"\u003e\"camelCase\"\u003c/span\u003e)]\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003estruct\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eT\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003epub\u003c/span\u003e some_key_1: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e,\n      \u003cspan class=\"hljs-keyword\"\u003epub\u003c/span\u003e some_key_2: \u003cspan class=\"hljs-type\"\u003eu8\u003c/span\u003e,\n  }\n\u003c/code\u003e\u003c/pre\u003e\n  \u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eField Attributes\u003c/h2\u003e\n\u003cp\u003eThese are attributes, placed on fields of \u003ccode\u003estructs\u003c/code\u003e or \u003ccode\u003eenum\u003c/code\u003e variants:\u003c/p\u003e\n\u003cul\u003e\n  \u003cli\u003e\n    \u003cp\u003e\n      \u003cstrong\u003erename:\u003c/strong\u003e - allows to rename some field on serialization/deserialization and separately\n      for each of them:\n    \u003c/p\u003e\n    \u003cpre\u003e\u003ccode class=\"hljs language-rust\"\u003e  \u003cspan class=\"hljs-meta\"\u003e#[derive(Deserialize, Serialize, Debug)]\u003c/span\u003e\n  \u003cspan class=\"hljs-keyword\"\u003estruct\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eT\u003c/span\u003e {\n      \u003cspan class=\"hljs-meta\"\u003e#[serde(rename(serialize = \u003cspan class=\"hljs-string\"\u003e\"SERIALIZE_KEY\"\u003c/span\u003e, deserialize = \u003cspan class=\"hljs-string\"\u003e\"other_KEY\"\u003c/span\u003e))]\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003epub\u003c/span\u003e some_key_1: \u003cspan class=\"hljs-type\"\u003eString\u003c/span\u003e,\n      \u003cspan class=\"hljs-meta\"\u003e#[serde(rename = \u003cspan class=\"hljs-string\"\u003e\"key2\"\u003c/span\u003e)]\u003c/span\u003e\n      \u003cspan class=\"hljs-keyword\"\u003epub\u003c/span\u003e some_key_2: \u003cspan class=\"hljs-type\"\u003eu8\u003c/span\u003e,\n  }\n\n  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003e\u003c/span\u003e\u003cspan class=\"hljs-variable\"\u003ejson\u003c/span\u003e = \u003cspan class=\"hljs-string\"\u003e\"{\n      \\\"other_KEY\\\": \\\"v1\\\",\n      \\\"key2\\\": 8\n  }\"\u003c/span\u003e;\n\n  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003e\u003c/span\u003e\u003cspan class=\"hljs-variable\"\u003et\u003c/span\u003e: T = serde_json::\u003cspan class=\"hljs-title function_ invoke__\"\u003efrom_str\u003c/span\u003e(\u0026#x26;json)?;\n  dbg!(\u0026#x26;t);\n  \u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003e\u003c/span\u003e\u003cspan class=\"hljs-variable\"\u003eserialized\u003c/span\u003e = serde_json::\u003cspan class=\"hljs-title function_ invoke__\"\u003eto_string\u003c/span\u003e(\u0026#x26;t)?;\n  dbg!(\u0026#x26;serialized);\n  \u003cspan class=\"hljs-title function_ invoke__\"\u003eOk\u003c/span\u003e(serialized)\n\u003c/code\u003e\u003c/pre\u003e\n    \u003cp\u003ewhere \u003ccode\u003eserialized\u003c/code\u003e will be:\u003c/p\u003e\n    \u003cpre\u003e\u003ccode class=\"hljs language-rust\"\u003e{\u003cspan class=\"hljs-string\"\u003e\"SERIALIZE_KEY\"\u003c/span\u003e:\u003cspan class=\"hljs-string\"\u003e\"v1\"\u003c/span\u003e,\u003cspan class=\"hljs-string\"\u003e\"key2\"\u003c/span\u003e:\u003cspan class=\"hljs-number\"\u003e8\u003c/span\u003e}\n\u003c/code\u003e\u003c/pre\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\n    \u003cp\u003e\n      \u003cstrong\u003ealias:\u003c/strong\u003e - specifies possible alias for property name, but it leaves possibility to\n      serialize/deserialize also with native Rust's struct field name.\n    \u003c/p\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\n    \u003cp\u003e\n      \u003cstrong\u003eskip:\u003c/strong\u003e - don't serialize/deserialize specified field. It has also more narrow \u003ccode\u003eskip_serializing\u003c/code\u003e\n      and \u003ccode\u003eskip_deserializing\u003c/code\u003e.\n    \u003c/p\u003e\n  \u003c/li\u003e\n\u003c/ul\u003e\n"}},"__N_SSG":true},"page":"/notes/[...noteKey]","query":{"noteKey":["rust","serialization"]},"buildId":"AiqCeJW8wJ9834NTx9N_r","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>