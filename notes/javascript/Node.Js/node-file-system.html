<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Node.JS File System</title><link rel="icon" href="/images/favicon.ico"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/b2e3df602701a6f2.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b2e3df602701a6f2.css" data-n-g=""/><link rel="preload" href="/_next/static/css/ca60bdbe6d2fe4f6.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ca60bdbe6d2fe4f6.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-fc97f3f1282ce3ed.js" defer=""></script><script src="/_next/static/chunks/main-f4ae3437c92c1efc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-85d7488a393e293e.js" defer=""></script><script src="/_next/static/chunks/369-aaa550419eab31e8.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5B...noteKey%5D-c40409aa5ea3ea66.js" defer=""></script><script src="/_next/static/fijjmpd75Ej9LFtuONxk3/_buildManifest.js" defer=""></script><script src="/_next/static/fijjmpd75Ej9LFtuONxk3/_ssgManifest.js" defer=""></script><script src="/_next/static/fijjmpd75Ej9LFtuONxk3/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><section class="Layout_centeredSection__nmU9U"><div><a href="/"><header class="Header_mainHeader__VLamk Header_mainHeaderS__9KEas"><div class="Header_mainLogoImg__eX6Vr"><img src="/images/profile-pic.png" alt="logo"/></div><h1 class="Header_blogName__4JblC">Tech Notes</h1></header></a></div><h1 class="NoteFormattedContent_noteTitle__Oi9sD">Node.JS File System</h1><article class="NoteFormattedContent_note__8cHeE">
<ul>
  <li><a href="#fs-module">FS Module</a>
    <ul>
      <li><a href="#opening-files">Opening Files</a></li>
      <li><a href="#creating-files">Creating Files</a></li>
      <li><a href="#removing-files">Removing Files</a></li>
      <li><a href="#files-metadata">Files Metadata</a></li>
    </ul>
  </li>
  <li><a href="#stream-api">Stream API</a></li>
  <li><a href="#plan">Plan</a></li>
</ul>
<h2>FS Module</h2>
<p><code>fs</code> is a <code>node.js</code> module providing access to the file system.</p>
<h3>Opening Files</h3>
<p>Function <code>open</code> from <code>fs</code> allows to open file from file system.</p>
<p>It has signature:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">open</span>(<span class="hljs-params">
    path: PathLike, 
    flags: OpenMode, 
    callback: (err: NodeJS.ErrnoException | <span class="hljs-literal">null</span>, fd: <span class="hljs-built_in">number</span>) => <span class="hljs-built_in">void</span>
</span>): <span class="hljs-built_in">void</span>;
</code></pre>
<table>
  <thead>
    <tr>
      <th align="left">Flag</th>
      <th align="left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="left">r</td>
      <td align="left">Open file for read. Throws exception if file doesn’t exists.</td>
    </tr>
    <tr>
      <td align="left">r+</td>
      <td align="left">Open file to read and write. Throws exception if file doesn’t exists.</td>
    </tr>
    <tr>
      <td align="left">rs+</td>
      <td align="left">Open file in synchronous mode to read and write.</td>
    </tr>
    <tr>
      <td align="left">w</td>
      <td align="left">Open file for writing. File is created if it doesn’t exists.</td>
    </tr>
    <tr>
      <td align="left">wx</td>
      <td align="left">It is same as ‘w’ but fails if path exists.</td>
    </tr>
    <tr>
      <td align="left">w+</td>
      <td align="left">Open file to read and write. File is created if it doesn’t exists.</td>
    </tr>
    <tr>
      <td align="left">wx+</td>
      <td align="left">It is same as ‘w+’ but fails if path exists.</td>
    </tr>
    <tr>
      <td align="left">a</td>
      <td align="left">Open file to append. File is created if it doesn’t exists.</td>
    </tr>
    <tr>
      <td align="left">ax</td>
      <td align="left">It is same as ‘a’ but fails if path exists.</td>
    </tr>
    <tr>
      <td align="left">a+</td>
      <td align="left">Open file for reading and appending. File is created if it doesn’t exists.</td>
    </tr>
    <tr>
      <td align="left">ax+</td>
      <td align="left">It is same as ‘a+’ but fails if path exists.</td>
    </tr>
  </tbody>
</table>
<p>If file does not exist, it will be created.</p>
<h3>Creating Files</h3>
<p>To create new file and write data to it <code>fs.write()</code> is used:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">function</span> write&#x3C;<span class="hljs-title class_">TBuffer</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">NodeJS</span>.<span class="hljs-property">ArrayBufferView</span>>(
    <span class="hljs-attr">fd</span>: <span class="hljs-built_in">number</span>,
    <span class="hljs-attr">buffer</span>: <span class="hljs-title class_">TBuffer</span>,
    <span class="hljs-attr">offset</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> | <span class="hljs-literal">null</span>,
    <span class="hljs-attr">length</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> | <span class="hljs-literal">null</span>,
    <span class="hljs-attr">position</span>: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span> | <span class="hljs-literal">null</span>,
    <span class="hljs-attr">callback</span>: <span class="hljs-function">(<span class="hljs-params">err: NodeJS.ErrnoException | <span class="hljs-literal">null</span>, written: <span class="hljs-built_in">number</span>, buffer: TBuffer</span>) =></span> <span class="hljs-built_in">void</span>
): <span class="hljs-built_in">void</span>;
</code></pre>
<p>Example:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">writeContentToFile</span>(<span class="hljs-params">
  path: PathLike,
  content: <span class="hljs-built_in">string</span>
</span>): <span class="hljs-title class_">Promise</span>&#x3C;<span class="hljs-built_in">void</span>> {
  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =></span> {
    <span class="hljs-comment">// open file in write mode</span>
    fs.<span class="hljs-title function_">open</span>(path, <span class="hljs-string">"w"</span>, <span class="hljs-function">(<span class="hljs-params">err, fd</span>) =></span> {
      <span class="hljs-keyword">if</span> (err) {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
        <span class="hljs-title function_">reject</span>(err);
      }

      <span class="hljs-comment">// write content into opened file</span>
      fs.<span class="hljs-title function_">write</span>(fd, content, <span class="hljs-function">(<span class="hljs-params">err, numberWritten, str</span>) =></span> {
        <span class="hljs-keyword">if</span> (err) {
          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
          <span class="hljs-title function_">reject</span>(err);
        }
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`number written: <span class="hljs-subst">${numberWritten}</span>, str: <span class="hljs-subst">${str}</span>`</span>);
        <span class="hljs-title function_">resolve</span>();
      });
    });
  });
}
</code></pre>
<p>There is a simpler way to write file - <code>fs.writeFile()</code>:</p>
<pre><code class="hljs language-ts">  fs.<span class="hljs-title function_">writeFile</span>( path, content, { <span class="hljs-attr">encoding</span>: <span class="hljs-string">"utf-8"</span> }, <span class="hljs-function">(<span class="hljs-params">err</span>) =></span> {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
    }
  );
</code></pre>
<p><code>writeFile</code> has signature:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">writeFile</span>(<span class="hljs-params">
    file: PathOrFileDescriptor, 
    data: <span class="hljs-built_in">string</span> | NodeJS.ArrayBufferView, 
    options: WriteFileOptions, 
    callback: NoParamCallback
</span>): <span class="hljs-built_in">void</span>;
</code></pre>
<p>
  To append some data to an existing file or create new if file does not exist there is a method <code>fs.appendFile()</code>
  with following signature:
</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">appendFile</span>(<span class="hljs-params">
  path: PathOrFileDescriptor,
  data: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">Uint8Array</span>,
  options: WriteFileOptions,
  callback: NoParamCallback
</span>): <span class="hljs-built_in">void</span>
</code></pre>
<p>where <code>callback</code> is of signature:</p>
<pre><code class="hljs language-ts">(<span class="hljs-attr">err</span>: <span class="hljs-title class_">NodeJS</span>.<span class="hljs-property">ErrnoException</span> | <span class="hljs-literal">null</span>) => <span class="hljs-built_in">void</span>
</code></pre>
<p>In case of any error object <code>err</code> of the callback will contain error of type:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ErrnoException</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Error</span> {
  errno?: <span class="hljs-built_in">number</span> | <span class="hljs-literal">undefined</span>
  code?: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>
  path?: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>
  syscall?: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>
}
</code></pre>
<h3>Removing Files</h3>
<p>To remove file from file system use <code>fs.unlink</code>:</p>
<pre><code class="hljs language-ts">fs.<span class="hljs-title function_">unlink</span>(path, <span class="hljs-function">(<span class="hljs-params">err</span>) =></span> {
  <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'File deleted!'</span>);
  }
});
</code></pre>
<h3>Files Metadata</h3>
<p>To get file metadata use:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">stat</span>(<span class="hljs-params">
    path: PathLike, 
    callback: (err: NodeJS.ErrnoException | <span class="hljs-literal">null</span>, stats: Stats) => <span class="hljs-built_in">void</span>
</span>): <span class="hljs-built_in">void</span>;
</code></pre>
<p><code>Stats</code> object contains:</p>
<ul>
  <li><code>isFile(): boolean</code></li>
  <li><code>isDirectory(): boolean</code></li>
  <li><code>isBlockDevice(): boolean</code></li>
  <li><code>isCharacterDevice(): boolean</code></li>
  <li><code>isSymbolicLink(): boolean</code></li>
  <li><code>isFIFO(): boolean</code></li>
  <li><code>isSocket(): boolean</code></li>
</ul>
<p>To rename files there is a <code>fs.rename()</code> function:</p>
<pre><code class="hljs language-ts">fs.<span class="hljs-title function_">rename</span>(existingFilePath, newFileName, <span class="hljs-function">(<span class="hljs-params">err</span>) =></span> {
  <span class="hljs-keyword">if</span> (err) {
      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">'File Renamed!'</span>);
  }
});
</code></pre>
<h2>Stream API</h2>
<p>
  Stream is a way to transfer data continuously. It is especially useful with large data, which could not be
  loaded into RAM otherwise.
</p>
<p><code>node:fs</code> module contains functions to operate streams over files.</p>
<p>To create read stream:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">const</span> stream = fs.<span class="hljs-title function_">createReadStream</span>(filePath);
</code></pre>
<p><code>createReadStream</code> has signature:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">function</span> <span class="hljs-title function_">createReadStream</span>(<span class="hljs-params">
    path: PathLike, 
    options?: BufferEncoding | ReadStreamOptions
</span>): <span class="hljs-title class_">ReadStream</span>;
</code></pre>
<p>To read data from create stream there is a <code>data</code> event, which should be listened:</p>
<pre><code class="hljs language-ts">stream.<span class="hljs-title function_">setEncoding</span>(<span class="hljs-string">"utf8"</span>);
stream.<span class="hljs-title function_">on</span>(<span class="hljs-string">"data"</span>, <span class="hljs-function">(<span class="hljs-params">data: <span class="hljs-built_in">string</span> | Buffer</span>) =></span> {
    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data);
});
</code></pre>
<p>To create write file stream there is a <code>fs.createWriteStream()</code> function:</p>
<pre><code class="hljs language-ts"><span class="hljs-keyword">const</span> stream = fs.<span class="hljs-title function_">createWriteStream</span>(path, {
    <span class="hljs-attr">encoding</span>: <span class="hljs-string">"utf-8"</span>,
});

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">let</span> x = <span class="hljs-number">0</span>; x &#x3C; <span class="hljs-number">100</span>; x++) {
    stream.<span class="hljs-title function_">write</span>(<span class="hljs-string">`<span class="hljs-subst">${x}</span>\n`</span>, <span class="hljs-function">(<span class="hljs-params">err</span>) =></span> {
        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(err);
    });
}
</code></pre>
<p>This example will write 100 lines with increasing numbers into file with path equal to <code>path</code> variable value.</p>
<p>
  Streams can be piped with other streams. For example we can create stream over http to download data
  and pipe it to file stream to immediately write this data to file. For example:
</p>
<pre><code class="hljs language-ts">axios.<span class="hljs-property">get</span>&#x3C;<span class="hljs-title class_">Readable</span>>(url, { <span class="hljs-attr">responseType</span>: <span class="hljs-string">"stream"</span> })
    .<span class="hljs-title function_">then</span>(<span class="hljs-keyword">async</span> (response) => {
        <span class="hljs-keyword">const</span> fileWriteStream = fs.<span class="hljs-title function_">createWriteStream</span>(<span class="hljs-string">'./local-file'</span>);
        response.<span class="hljs-property">data</span>.<span class="hljs-title function_">pipe</span>(fileWriteStream);
    })
    .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =></span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error));
</code></pre>
<h2>Plan</h2>
<ul>
  <li><code>path</code></li>
  <li><code>process.cwd()</code></li>
</ul>
</article></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"noteKey":["javascript","Node.Js","node-file-system"],"note":{"title":"Node.JS File System","date":"2022-04-24","content":"\n\u003cul\u003e\n  \u003cli\u003e\u003ca href=\"#fs-module\"\u003eFS Module\u003c/a\u003e\n    \u003cul\u003e\n      \u003cli\u003e\u003ca href=\"#opening-files\"\u003eOpening Files\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#creating-files\"\u003eCreating Files\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#removing-files\"\u003eRemoving Files\u003c/a\u003e\u003c/li\u003e\n      \u003cli\u003e\u003ca href=\"#files-metadata\"\u003eFiles Metadata\u003c/a\u003e\u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#stream-api\"\u003eStream API\u003c/a\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"#plan\"\u003ePlan\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eFS Module\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003efs\u003c/code\u003e is a \u003ccode\u003enode.js\u003c/code\u003e module providing access to the file system.\u003c/p\u003e\n\u003ch3\u003eOpening Files\u003c/h3\u003e\n\u003cp\u003eFunction \u003ccode\u003eopen\u003c/code\u003e from \u003ccode\u003efs\u003c/code\u003e allows to open file from file system.\u003c/p\u003e\n\u003cp\u003eIt has signature:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eopen\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\n    path: PathLike, \n    flags: OpenMode, \n    callback: (err: NodeJS.ErrnoException | \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, fd: \u003cspan class=\"hljs-built_in\"\u003enumber\u003c/span\u003e) =\u003e \u003cspan class=\"hljs-built_in\"\u003evoid\u003c/span\u003e\n\u003c/span\u003e): \u003cspan class=\"hljs-built_in\"\u003evoid\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ctable\u003e\n  \u003cthead\u003e\n    \u003ctr\u003e\n      \u003cth align=\"left\"\u003eFlag\u003c/th\u003e\n      \u003cth align=\"left\"\u003eDescription\u003c/th\u003e\n    \u003c/tr\u003e\n  \u003c/thead\u003e\n  \u003ctbody\u003e\n    \u003ctr\u003e\n      \u003ctd align=\"left\"\u003er\u003c/td\u003e\n      \u003ctd align=\"left\"\u003eOpen file for read. Throws exception if file doesn’t exists.\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd align=\"left\"\u003er+\u003c/td\u003e\n      \u003ctd align=\"left\"\u003eOpen file to read and write. Throws exception if file doesn’t exists.\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd align=\"left\"\u003ers+\u003c/td\u003e\n      \u003ctd align=\"left\"\u003eOpen file in synchronous mode to read and write.\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd align=\"left\"\u003ew\u003c/td\u003e\n      \u003ctd align=\"left\"\u003eOpen file for writing. File is created if it doesn’t exists.\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd align=\"left\"\u003ewx\u003c/td\u003e\n      \u003ctd align=\"left\"\u003eIt is same as ‘w’ but fails if path exists.\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd align=\"left\"\u003ew+\u003c/td\u003e\n      \u003ctd align=\"left\"\u003eOpen file to read and write. File is created if it doesn’t exists.\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd align=\"left\"\u003ewx+\u003c/td\u003e\n      \u003ctd align=\"left\"\u003eIt is same as ‘w+’ but fails if path exists.\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd align=\"left\"\u003ea\u003c/td\u003e\n      \u003ctd align=\"left\"\u003eOpen file to append. File is created if it doesn’t exists.\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd align=\"left\"\u003eax\u003c/td\u003e\n      \u003ctd align=\"left\"\u003eIt is same as ‘a’ but fails if path exists.\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd align=\"left\"\u003ea+\u003c/td\u003e\n      \u003ctd align=\"left\"\u003eOpen file for reading and appending. File is created if it doesn’t exists.\u003c/td\u003e\n    \u003c/tr\u003e\n    \u003ctr\u003e\n      \u003ctd align=\"left\"\u003eax+\u003c/td\u003e\n      \u003ctd align=\"left\"\u003eIt is same as ‘a+’ but fails if path exists.\u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/tbody\u003e\n\u003c/table\u003e\n\u003cp\u003eIf file does not exist, it will be created.\u003c/p\u003e\n\u003ch3\u003eCreating Files\u003c/h3\u003e\n\u003cp\u003eTo create new file and write data to it \u003ccode\u003efs.write()\u003c/code\u003e is used:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e write\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eTBuffer\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eNodeJS\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eArrayBufferView\u003c/span\u003e\u003e(\n    \u003cspan class=\"hljs-attr\"\u003efd\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003enumber\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003ebuffer\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eTBuffer\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003eoffset\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003enumber\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003elength\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003enumber\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003eposition\u003c/span\u003e: \u003cspan class=\"hljs-built_in\"\u003enumber\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e,\n    \u003cspan class=\"hljs-attr\"\u003ecallback\u003c/span\u003e: \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eerr: NodeJS.ErrnoException | \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, written: \u003cspan class=\"hljs-built_in\"\u003enumber\u003c/span\u003e, buffer: TBuffer\u003c/span\u003e) =\u003e\u003c/span\u003e \u003cspan class=\"hljs-built_in\"\u003evoid\u003c/span\u003e\n): \u003cspan class=\"hljs-built_in\"\u003evoid\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eExample:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ewriteContentToFile\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\n  path: PathLike,\n  content: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e\n\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-built_in\"\u003evoid\u003c/span\u003e\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003enew\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003ePromise\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eresolve, reject\u003c/span\u003e) =\u003e\u003c/span\u003e {\n    \u003cspan class=\"hljs-comment\"\u003e// open file in write mode\u003c/span\u003e\n    fs.\u003cspan class=\"hljs-title function_\"\u003eopen\u003c/span\u003e(path, \u003cspan class=\"hljs-string\"\u003e\"w\"\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eerr, fd\u003c/span\u003e) =\u003e\u003c/span\u003e {\n      \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (err) {\n        \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(err);\n        \u003cspan class=\"hljs-title function_\"\u003ereject\u003c/span\u003e(err);\n      }\n\n      \u003cspan class=\"hljs-comment\"\u003e// write content into opened file\u003c/span\u003e\n      fs.\u003cspan class=\"hljs-title function_\"\u003ewrite\u003c/span\u003e(fd, content, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eerr, numberWritten, str\u003c/span\u003e) =\u003e\u003c/span\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (err) {\n          \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(err);\n          \u003cspan class=\"hljs-title function_\"\u003ereject\u003c/span\u003e(err);\n        }\n        \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`number written: \u003cspan class=\"hljs-subst\"\u003e${numberWritten}\u003c/span\u003e, str: \u003cspan class=\"hljs-subst\"\u003e${str}\u003c/span\u003e`\u003c/span\u003e);\n        \u003cspan class=\"hljs-title function_\"\u003eresolve\u003c/span\u003e();\n      });\n    });\n  });\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThere is a simpler way to write file - \u003ccode\u003efs.writeFile()\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e  fs.\u003cspan class=\"hljs-title function_\"\u003ewriteFile\u003c/span\u003e( path, content, { \u003cspan class=\"hljs-attr\"\u003eencoding\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"utf-8\"\u003c/span\u003e }, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eerr\u003c/span\u003e) =\u003e\u003c/span\u003e {\n      \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(err);\n    }\n  );\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003ewriteFile\u003c/code\u003e has signature:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ewriteFile\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\n    file: PathOrFileDescriptor, \n    data: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e | NodeJS.ArrayBufferView, \n    options: WriteFileOptions, \n    callback: NoParamCallback\n\u003c/span\u003e): \u003cspan class=\"hljs-built_in\"\u003evoid\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\n  To append some data to an existing file or create new if file does not exist there is a method \u003ccode\u003efs.appendFile()\u003c/code\u003e\n  with following signature:\n\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003eappendFile\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\n  path: PathOrFileDescriptor,\n  data: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e | \u003cspan class=\"hljs-built_in\"\u003eUint8Array\u003c/span\u003e,\n  options: WriteFileOptions,\n  callback: NoParamCallback\n\u003c/span\u003e): \u003cspan class=\"hljs-built_in\"\u003evoid\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ewhere \u003ccode\u003ecallback\u003c/code\u003e is of signature:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e(\u003cspan class=\"hljs-attr\"\u003eerr\u003c/span\u003e: \u003cspan class=\"hljs-title class_\"\u003eNodeJS\u003c/span\u003e.\u003cspan class=\"hljs-property\"\u003eErrnoException\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e) =\u003e \u003cspan class=\"hljs-built_in\"\u003evoid\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIn case of any error object \u003ccode\u003eerr\u003c/code\u003e of the callback will contain error of type:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-keyword\"\u003einterface\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eErrnoException\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003eextends\u003c/span\u003e \u003cspan class=\"hljs-title class_\"\u003eError\u003c/span\u003e {\n  errno?: \u003cspan class=\"hljs-built_in\"\u003enumber\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e\n  code?: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e\n  path?: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e\n  syscall?: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e | \u003cspan class=\"hljs-literal\"\u003eundefined\u003c/span\u003e\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eRemoving Files\u003c/h3\u003e\n\u003cp\u003eTo remove file from file system use \u003ccode\u003efs.unlink\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003efs.\u003cspan class=\"hljs-title function_\"\u003eunlink\u003c/span\u003e(path, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eerr\u003c/span\u003e) =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (err) {\n      \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'File deleted!'\u003c/span\u003e);\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eFiles Metadata\u003c/h3\u003e\n\u003cp\u003eTo get file metadata use:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003estat\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\n    path: PathLike, \n    callback: (err: NodeJS.ErrnoException | \u003cspan class=\"hljs-literal\"\u003enull\u003c/span\u003e, stats: Stats) =\u003e \u003cspan class=\"hljs-built_in\"\u003evoid\u003c/span\u003e\n\u003c/span\u003e): \u003cspan class=\"hljs-built_in\"\u003evoid\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eStats\u003c/code\u003e object contains:\u003c/p\u003e\n\u003cul\u003e\n  \u003cli\u003e\u003ccode\u003eisFile(): boolean\u003c/code\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ccode\u003eisDirectory(): boolean\u003c/code\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ccode\u003eisBlockDevice(): boolean\u003c/code\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ccode\u003eisCharacterDevice(): boolean\u003c/code\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ccode\u003eisSymbolicLink(): boolean\u003c/code\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ccode\u003eisFIFO(): boolean\u003c/code\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ccode\u003eisSocket(): boolean\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eTo rename files there is a \u003ccode\u003efs.rename()\u003c/code\u003e function:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003efs.\u003cspan class=\"hljs-title function_\"\u003erename\u003c/span\u003e(existingFilePath, newFileName, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eerr\u003c/span\u003e) =\u003e\u003c/span\u003e {\n  \u003cspan class=\"hljs-keyword\"\u003eif\u003c/span\u003e (err) {\n      \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'File Renamed!'\u003c/span\u003e);\n  }\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eStream API\u003c/h2\u003e\n\u003cp\u003e\n  Stream is a way to transfer data continuously. It is especially useful with large data, which could not be\n  loaded into RAM otherwise.\n\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003enode:fs\u003c/code\u003e module contains functions to operate streams over files.\u003c/p\u003e\n\u003cp\u003eTo create read stream:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e stream = fs.\u003cspan class=\"hljs-title function_\"\u003ecreateReadStream\u003c/span\u003e(filePath);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003ecreateReadStream\u003c/code\u003e has signature:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-keyword\"\u003efunction\u003c/span\u003e \u003cspan class=\"hljs-title function_\"\u003ecreateReadStream\u003c/span\u003e(\u003cspan class=\"hljs-params\"\u003e\n    path: PathLike, \n    options?: BufferEncoding | ReadStreamOptions\n\u003c/span\u003e): \u003cspan class=\"hljs-title class_\"\u003eReadStream\u003c/span\u003e;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo read data from create stream there is a \u003ccode\u003edata\u003c/code\u003e event, which should be listened:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003estream.\u003cspan class=\"hljs-title function_\"\u003esetEncoding\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"utf8\"\u003c/span\u003e);\nstream.\u003cspan class=\"hljs-title function_\"\u003eon\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e\"data\"\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003edata: \u003cspan class=\"hljs-built_in\"\u003estring\u003c/span\u003e | Buffer\u003c/span\u003e) =\u003e\u003c/span\u003e {\n    \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003elog\u003c/span\u003e(data);\n});\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo create write file stream there is a \u003ccode\u003efs.createWriteStream()\u003c/code\u003e function:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003e\u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e stream = fs.\u003cspan class=\"hljs-title function_\"\u003ecreateWriteStream\u003c/span\u003e(path, {\n    \u003cspan class=\"hljs-attr\"\u003eencoding\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"utf-8\"\u003c/span\u003e,\n});\n\n\u003cspan class=\"hljs-keyword\"\u003efor\u003c/span\u003e (\u003cspan class=\"hljs-keyword\"\u003elet\u003c/span\u003e x = \u003cspan class=\"hljs-number\"\u003e0\u003c/span\u003e; x \u0026#x3C; \u003cspan class=\"hljs-number\"\u003e100\u003c/span\u003e; x++) {\n    stream.\u003cspan class=\"hljs-title function_\"\u003ewrite\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e`\u003cspan class=\"hljs-subst\"\u003e${x}\u003c/span\u003e\\n`\u003c/span\u003e, \u003cspan class=\"hljs-function\"\u003e(\u003cspan class=\"hljs-params\"\u003eerr\u003c/span\u003e) =\u003e\u003c/span\u003e {\n        \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(err);\n    });\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis example will write 100 lines with increasing numbers into file with path equal to \u003ccode\u003epath\u003c/code\u003e variable value.\u003c/p\u003e\n\u003cp\u003e\n  Streams can be piped with other streams. For example we can create stream over http to download data\n  and pipe it to file stream to immediately write this data to file. For example:\n\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ts\"\u003eaxios.\u003cspan class=\"hljs-property\"\u003eget\u003c/span\u003e\u0026#x3C;\u003cspan class=\"hljs-title class_\"\u003eReadable\u003c/span\u003e\u003e(url, { \u003cspan class=\"hljs-attr\"\u003eresponseType\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\"stream\"\u003c/span\u003e })\n    .\u003cspan class=\"hljs-title function_\"\u003ethen\u003c/span\u003e(\u003cspan class=\"hljs-keyword\"\u003easync\u003c/span\u003e (response) =\u003e {\n        \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e fileWriteStream = fs.\u003cspan class=\"hljs-title function_\"\u003ecreateWriteStream\u003c/span\u003e(\u003cspan class=\"hljs-string\"\u003e'./local-file'\u003c/span\u003e);\n        response.\u003cspan class=\"hljs-property\"\u003edata\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003epipe\u003c/span\u003e(fileWriteStream);\n    })\n    .\u003cspan class=\"hljs-title function_\"\u003ecatch\u003c/span\u003e(\u003cspan class=\"hljs-function\"\u003e\u003cspan class=\"hljs-params\"\u003eerror\u003c/span\u003e =\u003e\u003c/span\u003e \u003cspan class=\"hljs-variable language_\"\u003econsole\u003c/span\u003e.\u003cspan class=\"hljs-title function_\"\u003eerror\u003c/span\u003e(error));\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003ePlan\u003c/h2\u003e\n\u003cul\u003e\n  \u003cli\u003e\u003ccode\u003epath\u003c/code\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ccode\u003eprocess.cwd()\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n"}},"__N_SSG":true},"page":"/notes/[...noteKey]","query":{"noteKey":["javascript","Node.Js","node-file-system"]},"buildId":"fijjmpd75Ej9LFtuONxk3","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>