<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>kubernetes Basics</title><link rel="icon" href="/images/favicon.ico"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/b65b5b41f2379875.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b65b5b41f2379875.css" data-n-g=""/><link rel="preload" href="/_next/static/css/0d9654b911e08999.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0d9654b911e08999.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-fc97f3f1282ce3ed.js" defer=""></script><script src="/_next/static/chunks/main-f4ae3437c92c1efc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-85d7488a393e293e.js" defer=""></script><script src="/_next/static/chunks/211-ca3cd870e26e881a.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5B...noteKey%5D-bc6552c3ae1e3718.js" defer=""></script><script src="/_next/static/49fTz6XW6l3pjYrqgfyTN/_buildManifest.js" defer=""></script><script src="/_next/static/49fTz6XW6l3pjYrqgfyTN/_ssgManifest.js" defer=""></script><script src="/_next/static/49fTz6XW6l3pjYrqgfyTN/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><section class="Layout_centeredSection__nmU9U"><ul class="NavigationBar_navbar__CBMoV"><li class="NavigationBar_navitem__LKB5F"><a class="NavigationBar_navitemContent__jEyWq" href="/">Home</a><span class="NavigationBar_separator__qvEVD">|</span></li><li class="NavigationBar_navitem__LKB5F"><button class="NavigationBar_navitemContent__jEyWq">Back</button><span class="NavigationBar_separator__qvEVD">|</span></li></ul><h1 class="NoteFormattedContent_noteTitle__Oi9sD">kubernetes Basics</h1><article class="NoteFormattedContent_note__8cHeE">
<p><code>kubernetes</code> allows to run variety of different containers on multiple machines.</p>
<p>
  <code>Claster</code> is a combination of a <code>master</code> and one or many <code>nodes</code> which run containers. Each node may be a
  different machine.
</p>
<h2>Node</h2>
<p>
  <code>Node</code> is a machine, running containers. It may be physical or virtual machine. Each cluster can have one or more
  nodes. Nodes are managed by Kubernetes master node.
</p>
<p>Node runs at minimum process allowing master to manage that node - <code>kubelet</code> and container runtime(Docker in most cases).</p>
<h2>Pod</h2>
<p>
  Minimal unit of deployment in kubernetes is <code>pod</code>. Pod contains one or more containers and some shared resources,
  which must be deployed together or grouped by some other criteria. One pod's containers are deployed within single
  node. If node failse same pod will be scheduled on a different node.
</p>
<h2>Service</h2>
<p>
  <code>Services</code> make it possible to discover and reach nodes. Nodes may be created, removed, updated. This may lead to
  change of node's IP address. That is why it is not recommended to expose node to outside world directly, but using
  service instead. Usually service is connected to necessary nodes with system of labels.
</p>
<p><strong>Service Types:</strong></p>
<ul>
  <li><code>ClusterIP</code> Exposes the Service on an internal IP in the cluster. This type makes the Service only reachable from within the cluster. Used by default.</li>
  <li><code>NodePort</code> Exposes the Service on the same port of each selected Node in the cluster using NAT. Makes a Service accessible from outside the cluster using :. Superset of ClusterIP.</li>
  <li><code>LoadBalancer</code> Creates an external load balancer in the current cloud (if supported) and assigns a fixed, external IP to the Service. Superset of NodePort.</li>
  <li><code>ExternalName</code> Maps the Service to the contents of the <code>externalName</code> field (e.g. <code>foo.bar.example.com</code>), by returning a <code>CNAME</code> record with its value. No proxying of any kind is set up.</li>
  <li><code>Ingress</code></li>
</ul>
<h2>Deployments</h2>
<p>
  <code>Deployment</code> is a configuration, which instructs Kubernetes master how to allocate instances of our application.
  User defines desired state of running pods and deployment will make according changes.
</p>
<p>To get all running deployments info, run:</p>
<pre><code class="hljs language-bash">kubectl get deployments
</code></pre>
<p>To get replica sets, created by the deployment:</p>
<pre><code class="hljs language-bash">kubectl get rs
</code></pre>
<h2>Basic configuration</h2>
<p>For local development it is recommended to use <code>minikube</code> as a Kuberantes cluster. To install it on Linux:</p>
<pre><code class="hljs language-bash">wget https://storage.googleapis.com/minikube/releases/latest/minikube-linux-&#x3C;your architecture code>
</code></pre>
<p>Architecture code may be for example <code>amd64</code>, <code>arm64</code>, e.t.c</p>
<p>Copy it to executables directory:</p>
<pre><code class="hljs language-bash">sudo <span class="hljs-built_in">cp</span> minikube-linux-&#x3C;architecture code> /usr/local/bin/minikube
</code></pre>
<p>And make it executable:</p>
<pre><code class="hljs language-bash">sudo <span class="hljs-built_in">chmod</span> 755 /usr/local/bin/minikube
</code></pre>
<p>To check that everything is installed run <code>minikube version</code></p>
<p>To start cluster run:</p>
<pre><code class="hljs language-bash">minikube start
</code></pre>
<p><strong>TODO: configure kubectl to connect a cluster</strong></p>
<p>To check cluster status run:</p>
<pre><code class="hljs language-bash">kubectl cluster-info
</code></pre>
<h2>Running Configurations</h2>
<p>To feed kubernetes configurations to cluster run:</p>
<pre><code class="hljs language-bash">kubectl apply -f &#x3C;filename>
</code></pre>
<p>To check status of execution:</p>
<pre><code class="hljs language-bash">kubectl get pods
</code></pre>
<p>Running pods could be accessible by cluster IP, which could be discovered with</p>
<pre><code class="hljs language-bash">kubectl get nodes -o wide
</code></pre>
<p>or</p>
<pre><code class="hljs language-bash">minikube ip
</code></pre>
<p>To get detailed information about Kubernetes object run:</p>
<pre><code class="hljs language-bash">kubectl describe &#x3C;object <span class="hljs-built_in">type</span>> [object name]
</code></pre>
<p>If <code>object name</code> is omitted, all object of given type will be described.</p>
</article></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"noteKey":["infrastructure","kubernates","kubernetes_base"],"note":{"title":"kubernetes Basics","date":"2022-10-23","content":"\n\u003cp\u003e\u003ccode\u003ekubernetes\u003c/code\u003e allows to run variety of different containers on multiple machines.\u003c/p\u003e\n\u003cp\u003e\n  \u003ccode\u003eClaster\u003c/code\u003e is a combination of a \u003ccode\u003emaster\u003c/code\u003e and one or many \u003ccode\u003enodes\u003c/code\u003e which run containers. Each node may be a\n  different machine.\n\u003c/p\u003e\n\u003ch2\u003eNode\u003c/h2\u003e\n\u003cp\u003e\n  \u003ccode\u003eNode\u003c/code\u003e is a machine, running containers. It may be physical or virtual machine. Each cluster can have one or more\n  nodes. Nodes are managed by Kubernetes master node.\n\u003c/p\u003e\n\u003cp\u003eNode runs at minimum process allowing master to manage that node - \u003ccode\u003ekubelet\u003c/code\u003e and container runtime(Docker in most cases).\u003c/p\u003e\n\u003ch2\u003ePod\u003c/h2\u003e\n\u003cp\u003e\n  Minimal unit of deployment in kubernetes is \u003ccode\u003epod\u003c/code\u003e. Pod contains one or more containers and some shared resources,\n  which must be deployed together or grouped by some other criteria. One pod's containers are deployed within single\n  node. If node failse same pod will be scheduled on a different node.\n\u003c/p\u003e\n\u003ch2\u003eService\u003c/h2\u003e\n\u003cp\u003e\n  \u003ccode\u003eServices\u003c/code\u003e make it possible to discover and reach nodes. Nodes may be created, removed, updated. This may lead to\n  change of node's IP address. That is why it is not recommended to expose node to outside world directly, but using\n  service instead. Usually service is connected to necessary nodes with system of labels.\n\u003c/p\u003e\n\u003cp\u003e\u003cstrong\u003eService Types:\u003c/strong\u003e\u003c/p\u003e\n\u003cul\u003e\n  \u003cli\u003e\u003ccode\u003eClusterIP\u003c/code\u003e Exposes the Service on an internal IP in the cluster. This type makes the Service only reachable from within the cluster. Used by default.\u003c/li\u003e\n  \u003cli\u003e\u003ccode\u003eNodePort\u003c/code\u003e Exposes the Service on the same port of each selected Node in the cluster using NAT. Makes a Service accessible from outside the cluster using :. Superset of ClusterIP.\u003c/li\u003e\n  \u003cli\u003e\u003ccode\u003eLoadBalancer\u003c/code\u003e Creates an external load balancer in the current cloud (if supported) and assigns a fixed, external IP to the Service. Superset of NodePort.\u003c/li\u003e\n  \u003cli\u003e\u003ccode\u003eExternalName\u003c/code\u003e Maps the Service to the contents of the \u003ccode\u003eexternalName\u003c/code\u003e field (e.g. \u003ccode\u003efoo.bar.example.com\u003c/code\u003e), by returning a \u003ccode\u003eCNAME\u003c/code\u003e record with its value. No proxying of any kind is set up.\u003c/li\u003e\n  \u003cli\u003e\u003ccode\u003eIngress\u003c/code\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eDeployments\u003c/h2\u003e\n\u003cp\u003e\n  \u003ccode\u003eDeployment\u003c/code\u003e is a configuration, which instructs Kubernetes master how to allocate instances of our application.\n  User defines desired state of running pods and deployment will make according changes.\n\u003c/p\u003e\n\u003cp\u003eTo get all running deployments info, run:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ekubectl get deployments\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo get replica sets, created by the deployment:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ekubectl get rs\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eBasic configuration\u003c/h2\u003e\n\u003cp\u003eFor local development it is recommended to use \u003ccode\u003eminikube\u003c/code\u003e as a Kuberantes cluster. To install it on Linux:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ewget https://storage.googleapis.com/minikube/releases/latest/minikube-linux-\u0026#x3C;your architecture code\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eArchitecture code may be for example \u003ccode\u003eamd64\u003c/code\u003e, \u003ccode\u003earm64\u003c/code\u003e, e.t.c\u003c/p\u003e\n\u003cp\u003eCopy it to executables directory:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003esudo \u003cspan class=\"hljs-built_in\"\u003ecp\u003c/span\u003e minikube-linux-\u0026#x3C;architecture code\u003e /usr/local/bin/minikube\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd make it executable:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003esudo \u003cspan class=\"hljs-built_in\"\u003echmod\u003c/span\u003e 755 /usr/local/bin/minikube\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo check that everything is installed run \u003ccode\u003eminikube version\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eTo start cluster run:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eminikube start\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003cstrong\u003eTODO: configure kubectl to connect a cluster\u003c/strong\u003e\u003c/p\u003e\n\u003cp\u003eTo check cluster status run:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ekubectl cluster-info\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eRunning Configurations\u003c/h2\u003e\n\u003cp\u003eTo feed kubernetes configurations to cluster run:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ekubectl apply -f \u0026#x3C;filename\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo check status of execution:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ekubectl get pods\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eRunning pods could be accessible by cluster IP, which could be discovered with\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ekubectl get nodes -o wide\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eor\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003eminikube ip\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo get detailed information about Kubernetes object run:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ekubectl describe \u0026#x3C;object \u003cspan class=\"hljs-built_in\"\u003etype\u003c/span\u003e\u003e [object name]\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eIf \u003ccode\u003eobject name\u003c/code\u003e is omitted, all object of given type will be described.\u003c/p\u003e\n"}},"__N_SSG":true},"page":"/notes/[...noteKey]","query":{"noteKey":["infrastructure","kubernates","kubernetes_base"]},"buildId":"49fTz6XW6l3pjYrqgfyTN","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>