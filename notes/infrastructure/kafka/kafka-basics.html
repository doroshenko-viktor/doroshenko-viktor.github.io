<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Kafka Basics</title><link rel="icon" href="/images/favicon.ico"/><meta name="next-head-count" content="4"/><link rel="preload" href="/_next/static/css/b65b5b41f2379875.css" as="style"/><link rel="stylesheet" href="/_next/static/css/b65b5b41f2379875.css" data-n-g=""/><link rel="preload" href="/_next/static/css/0d9654b911e08999.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0d9654b911e08999.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-69bfa6990bb9e155.js" defer=""></script><script src="/_next/static/chunks/framework-fc97f3f1282ce3ed.js" defer=""></script><script src="/_next/static/chunks/main-f4ae3437c92c1efc.js" defer=""></script><script src="/_next/static/chunks/pages/_app-85d7488a393e293e.js" defer=""></script><script src="/_next/static/chunks/211-ca3cd870e26e881a.js" defer=""></script><script src="/_next/static/chunks/pages/notes/%5B...noteKey%5D-bc6552c3ae1e3718.js" defer=""></script><script src="/_next/static/IjqNhIRqaAJaH2DY5dkbz/_buildManifest.js" defer=""></script><script src="/_next/static/IjqNhIRqaAJaH2DY5dkbz/_ssgManifest.js" defer=""></script><script src="/_next/static/IjqNhIRqaAJaH2DY5dkbz/_middlewareManifest.js" defer=""></script></head><body><div id="__next"><section class="Layout_centeredSection__nmU9U"><ul class="NavigationBar_navbar__CBMoV"><li class="NavigationBar_navitem__LKB5F"><a class="NavigationBar_navitemContent__jEyWq" href="/">Home</a><span class="NavigationBar_separator__qvEVD">|</span></li><li class="NavigationBar_navitem__LKB5F"><button class="NavigationBar_navitemContent__jEyWq">Back</button><span class="NavigationBar_separator__qvEVD">|</span></li></ul><h1 class="NoteFormattedContent_noteTitle__Oi9sD">Kafka Basics</h1><article class="NoteFormattedContent_note__8cHeE">
<p><code>Kafka</code> is an open source event streaming software, which allows to build event-driven applications.</p>
<h2>Install On MacOs</h2>
<p>To run <code>Kafka</code> you need to have <code>Java Runtime Environment</code>.</p>
<pre><code class="hljs language-bash">brew cask install java
brew install kafka
</code></pre>
<p>First need to run <code>Zookeeper</code>:</p>
<pre><code class="hljs language-bash">zookeeper-server-start /usr/local/etc/kafka/zookeeper.properties
</code></pre>
<p>Then start <code>Kafka</code>:</p>
<pre><code class="hljs language-bash">kafka-server-start /usr/local/etc/kafka/server.properties
</code></pre>
<h2>Install On Debian</h2>
<p>Install JDK:</p>
<pre><code class="hljs language-bash">sudo apt install openjdk-17-jdk
</code></pre>
<p>Download kafka:</p>
<pre><code class="hljs language-bash">wget https://downloads.apache.org/kafka/&#x3C;version>/kafka_2.13-&#x3C;version>.tgz
</code></pre>
<p>Unpack downloaded Kafka archive and move it to the installation directory:</p>
<pre><code class="hljs language-bash">tar -xzf kafka_2.13-3.4.0.tgz
sudo <span class="hljs-built_in">mv</span> kafka_2.13-3.4.0 /usr/local/kafka
</code></pre>
<p>Create <code>systemctl</code> config for <code>zookeeper</code>:</p>
<pre><code class="hljs language-bash">sudo vim /etc/systemd/system/zookeeper.service
</code></pre>
<p>And fill it with:</p>
<pre><code class="hljs language-ini"><span class="hljs-section">[Unit]</span>
<span class="hljs-attr">Description</span>=Apache Zookeeper server
<span class="hljs-attr">Documentation</span>=http://zookeeper.apache.org
<span class="hljs-attr">Requires</span>=network.target remote-fs.target
<span class="hljs-attr">After</span>=network.target remote-fs.target

<span class="hljs-section">[Service]</span>
<span class="hljs-attr">Type</span>=simple
<span class="hljs-attr">ExecStart</span>=/usr/local/kafka/bin/zookeeper-server-start.sh /usr/local/kafka/config/zookeeper.properties
<span class="hljs-attr">ExecStop</span>=/usr/local/kafka/bin/zookeeper-server-stop.sh
<span class="hljs-attr">Restart</span>=<span class="hljs-literal">on</span>-abnormal

<span class="hljs-section">[Install]</span>
<span class="hljs-attr">WantedBy</span>=multi-user.target
</code></pre>
<p>Next create <code>systemctl</code> config for <code>Kafka</code>:</p>
<pre><code class="hljs language-bash">sudo vim /etc/systemd/system/kafka.service
</code></pre>
<p>And fill it with:</p>
<pre><code class="hljs language-ini"><span class="hljs-section">[Unit]</span>
<span class="hljs-attr">Description</span>=Apache Kafka Server
<span class="hljs-attr">Documentation</span>=http://kafka.apache.org/documentation.html
<span class="hljs-attr">Requires</span>=zookeeper.service

<span class="hljs-section">[Service]</span>
<span class="hljs-attr">Type</span>=simple
<span class="hljs-attr">Environment</span>=<span class="hljs-string">"JAVA_HOME=&#x3C;insert path to java here>"</span>
<span class="hljs-attr">ExecStart</span>=/usr/local/kafka/bin/kafka-server-start.sh /usr/local/kafka/config/server.properties
<span class="hljs-attr">ExecStop</span>=/usr/local/kafka/bin/kafka-server-stop.sh

<span class="hljs-section">[Install]</span>
<span class="hljs-attr">WantedBy</span>=multi-user.target
</code></pre>
<p>Reload <code>systemctl</code> daemon:</p>
<pre><code class="hljs language-bash">systemctl daemon-reload
</code></pre>
<p>and start services for <code>Zookeeper</code> and <code>Kafka</code>:</p>
<pre><code class="hljs language-bash">sudo systemctl start zookeeper
sudo systemctl start kafka
</code></pre>
<p>To check it's status run:</p>
<pre><code class="hljs language-bash">sudo systemctl status kafka
</code></pre>
<h2>Running On VM:</h2>
<p>
  For <code>Kafka</code> to be accessible from outside of the VM, need to configure <code>advertised.listeners</code> to be public domain or IP address
  in file <code>server.properties</code>
</p>
<h2>Basic Terminology</h2>
<ul>
  <li><code>Kafka broker</code>  —  one or more servers running Kafka nodes. Single <code>Kafka Cluster</code> is made of <code>brokers</code>.</li>
  <li>
    <code>Event</code> - is a message, which contains some information or simply alerts, that something happened.
    Each event contains <code>key</code>, <code>value</code>, timestamp and some not mandatory metadata.
  </li>
  <li><code>Topic</code>  - stream or category to which event are published and organized.</li>
  <li>
    <code>Partition</code> - <code>topics</code> are divided into partitions, which may be spread across different <code>buckets</code>
    on different brokers. Events with the same <code>key</code> will always be published to the same partition
    ensuring with guarantee of event order in this partition.
  </li>
  <li><code>Producer</code> - application, which emits new events to Kafka instance.</li>
  <li><code>Consumer</code> - application, which consumes and handles events from Kafka.</li>
  <li><code>Consumer group</code> - group of consumers united by single <code>consumer id</code>. These consumers have same <code>offset</code>.</li>
  <li><code>Offset</code> - number, used to persist current position in the topic or partition.</li>
</ul>
<p>
  To operate <code>Kafka</code> requires <code>Zookeeper</code> application, which allows <code>Kafka cluster</code> to track nodes status,
  maintain list of topics and event messages.
</p>
<p>
  Each <code>topic</code> may have many <code>producers</code> and many <code>consumers</code>. Topics may be replicated across multiple brokers.
  Event are not deleted after consumer consumption.
</p>
<h2>References</h2>
<ul>
  <li><a href="https://medium.com/@Ankitthakur/apache-kafka-installation-on-mac-using-homebrew-a367cdefd273">https://medium.com/@Ankitthakur/apache-kafka-installation-on-mac-using-homebrew-a367cdefd273</a></li>
  <li><a href="https://tecadmin.net/install-apache-kafka-debian/">https://tecadmin.net/install-apache-kafka-debian/</a></li>
</ul>
</article></section></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"noteKey":["infrastructure","kafka","kafka-basics"],"note":{"title":"Kafka Basics","date":"2022-08-18","content":"\n\u003cp\u003e\u003ccode\u003eKafka\u003c/code\u003e is an open source event streaming software, which allows to build event-driven applications.\u003c/p\u003e\n\u003ch2\u003eInstall On MacOs\u003c/h2\u003e\n\u003cp\u003eTo run \u003ccode\u003eKafka\u003c/code\u003e you need to have \u003ccode\u003eJava Runtime Environment\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ebrew cask install java\nbrew install kafka\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eFirst need to run \u003ccode\u003eZookeeper\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ezookeeper-server-start /usr/local/etc/kafka/zookeeper.properties\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThen start \u003ccode\u003eKafka\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ekafka-server-start /usr/local/etc/kafka/server.properties\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eInstall On Debian\u003c/h2\u003e\n\u003cp\u003eInstall JDK:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003esudo apt install openjdk-17-jdk\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eDownload kafka:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003ewget https://downloads.apache.org/kafka/\u0026#x3C;version\u003e/kafka_2.13-\u0026#x3C;version\u003e.tgz\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eUnpack downloaded Kafka archive and move it to the installation directory:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003etar -xzf kafka_2.13-3.4.0.tgz\nsudo \u003cspan class=\"hljs-built_in\"\u003emv\u003c/span\u003e kafka_2.13-3.4.0 /usr/local/kafka\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eCreate \u003ccode\u003esystemctl\u003c/code\u003e config for \u003ccode\u003ezookeeper\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003esudo vim /etc/systemd/system/zookeeper.service\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd fill it with:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ini\"\u003e\u003cspan class=\"hljs-section\"\u003e[Unit]\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eDescription\u003c/span\u003e=Apache Zookeeper server\n\u003cspan class=\"hljs-attr\"\u003eDocumentation\u003c/span\u003e=http://zookeeper.apache.org\n\u003cspan class=\"hljs-attr\"\u003eRequires\u003c/span\u003e=network.target remote-fs.target\n\u003cspan class=\"hljs-attr\"\u003eAfter\u003c/span\u003e=network.target remote-fs.target\n\n\u003cspan class=\"hljs-section\"\u003e[Service]\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eType\u003c/span\u003e=simple\n\u003cspan class=\"hljs-attr\"\u003eExecStart\u003c/span\u003e=/usr/local/kafka/bin/zookeeper-server-start.sh /usr/local/kafka/config/zookeeper.properties\n\u003cspan class=\"hljs-attr\"\u003eExecStop\u003c/span\u003e=/usr/local/kafka/bin/zookeeper-server-stop.sh\n\u003cspan class=\"hljs-attr\"\u003eRestart\u003c/span\u003e=\u003cspan class=\"hljs-literal\"\u003eon\u003c/span\u003e-abnormal\n\n\u003cspan class=\"hljs-section\"\u003e[Install]\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eWantedBy\u003c/span\u003e=multi-user.target\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNext create \u003ccode\u003esystemctl\u003c/code\u003e config for \u003ccode\u003eKafka\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003esudo vim /etc/systemd/system/kafka.service\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd fill it with:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-ini\"\u003e\u003cspan class=\"hljs-section\"\u003e[Unit]\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eDescription\u003c/span\u003e=Apache Kafka Server\n\u003cspan class=\"hljs-attr\"\u003eDocumentation\u003c/span\u003e=http://kafka.apache.org/documentation.html\n\u003cspan class=\"hljs-attr\"\u003eRequires\u003c/span\u003e=zookeeper.service\n\n\u003cspan class=\"hljs-section\"\u003e[Service]\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eType\u003c/span\u003e=simple\n\u003cspan class=\"hljs-attr\"\u003eEnvironment\u003c/span\u003e=\u003cspan class=\"hljs-string\"\u003e\"JAVA_HOME=\u0026#x3C;insert path to java here\u003e\"\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eExecStart\u003c/span\u003e=/usr/local/kafka/bin/kafka-server-start.sh /usr/local/kafka/config/server.properties\n\u003cspan class=\"hljs-attr\"\u003eExecStop\u003c/span\u003e=/usr/local/kafka/bin/kafka-server-stop.sh\n\n\u003cspan class=\"hljs-section\"\u003e[Install]\u003c/span\u003e\n\u003cspan class=\"hljs-attr\"\u003eWantedBy\u003c/span\u003e=multi-user.target\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eReload \u003ccode\u003esystemctl\u003c/code\u003e daemon:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003esystemctl daemon-reload\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eand start services for \u003ccode\u003eZookeeper\u003c/code\u003e and \u003ccode\u003eKafka\u003c/code\u003e:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003esudo systemctl start zookeeper\nsudo systemctl start kafka\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo check it's status run:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-bash\"\u003esudo systemctl status kafka\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003eRunning On VM:\u003c/h2\u003e\n\u003cp\u003e\n  For \u003ccode\u003eKafka\u003c/code\u003e to be accessible from outside of the VM, need to configure \u003ccode\u003eadvertised.listeners\u003c/code\u003e to be public domain or IP address\n  in file \u003ccode\u003eserver.properties\u003c/code\u003e\n\u003c/p\u003e\n\u003ch2\u003eBasic Terminology\u003c/h2\u003e\n\u003cul\u003e\n  \u003cli\u003e\u003ccode\u003eKafka broker\u003c/code\u003e  —  one or more servers running Kafka nodes. Single \u003ccode\u003eKafka Cluster\u003c/code\u003e is made of \u003ccode\u003ebrokers\u003c/code\u003e.\u003c/li\u003e\n  \u003cli\u003e\n    \u003ccode\u003eEvent\u003c/code\u003e - is a message, which contains some information or simply alerts, that something happened.\n    Each event contains \u003ccode\u003ekey\u003c/code\u003e, \u003ccode\u003evalue\u003c/code\u003e, timestamp and some not mandatory metadata.\n  \u003c/li\u003e\n  \u003cli\u003e\u003ccode\u003eTopic\u003c/code\u003e  - stream or category to which event are published and organized.\u003c/li\u003e\n  \u003cli\u003e\n    \u003ccode\u003ePartition\u003c/code\u003e - \u003ccode\u003etopics\u003c/code\u003e are divided into partitions, which may be spread across different \u003ccode\u003ebuckets\u003c/code\u003e\n    on different brokers. Events with the same \u003ccode\u003ekey\u003c/code\u003e will always be published to the same partition\n    ensuring with guarantee of event order in this partition.\n  \u003c/li\u003e\n  \u003cli\u003e\u003ccode\u003eProducer\u003c/code\u003e - application, which emits new events to Kafka instance.\u003c/li\u003e\n  \u003cli\u003e\u003ccode\u003eConsumer\u003c/code\u003e - application, which consumes and handles events from Kafka.\u003c/li\u003e\n  \u003cli\u003e\u003ccode\u003eConsumer group\u003c/code\u003e - group of consumers united by single \u003ccode\u003econsumer id\u003c/code\u003e. These consumers have same \u003ccode\u003eoffset\u003c/code\u003e.\u003c/li\u003e\n  \u003cli\u003e\u003ccode\u003eOffset\u003c/code\u003e - number, used to persist current position in the topic or partition.\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003e\n  To operate \u003ccode\u003eKafka\u003c/code\u003e requires \u003ccode\u003eZookeeper\u003c/code\u003e application, which allows \u003ccode\u003eKafka cluster\u003c/code\u003e to track nodes status,\n  maintain list of topics and event messages.\n\u003c/p\u003e\n\u003cp\u003e\n  Each \u003ccode\u003etopic\u003c/code\u003e may have many \u003ccode\u003eproducers\u003c/code\u003e and many \u003ccode\u003econsumers\u003c/code\u003e. Topics may be replicated across multiple brokers.\n  Event are not deleted after consumer consumption.\n\u003c/p\u003e\n\u003ch2\u003eReferences\u003c/h2\u003e\n\u003cul\u003e\n  \u003cli\u003e\u003ca href=\"https://medium.com/@Ankitthakur/apache-kafka-installation-on-mac-using-homebrew-a367cdefd273\"\u003ehttps://medium.com/@Ankitthakur/apache-kafka-installation-on-mac-using-homebrew-a367cdefd273\u003c/a\u003e\u003c/li\u003e\n  \u003cli\u003e\u003ca href=\"https://tecadmin.net/install-apache-kafka-debian/\"\u003ehttps://tecadmin.net/install-apache-kafka-debian/\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n"}},"__N_SSG":true},"page":"/notes/[...noteKey]","query":{"noteKey":["infrastructure","kafka","kafka-basics"]},"buildId":"IjqNhIRqaAJaH2DY5dkbz","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>