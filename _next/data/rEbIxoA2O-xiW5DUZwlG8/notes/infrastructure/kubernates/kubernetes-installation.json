{"pageProps":{"noteKey":["infrastructure","kubernates","kubernetes-installation"],"note":{"title":"Kubernetes Installation","date":"2022-12-26","content":"\n<h2>Debian</h2>\n<h3>Kubectl</h3>\n<p>First install <code>Docker</code> with:</p>\n<pre><code class=\"hljs language-bash\">sudo apt install docker.io\n</code></pre>\n<p>Then enable it, so <code>docker</code> will autostart on the machine startup:</p>\n<pre><code class=\"hljs language-bash\">systemctl <span class=\"hljs-built_in\">enable</span> docker\n</code></pre>\n<p>Add user to the <code>docker</code> user group:</p>\n<pre><code class=\"hljs language-bash\">sudo usermod -aG docker <span class=\"hljs-variable\">$USER</span>\n</code></pre>\n<p>Download <code>kubectl</code>:</p>\n<pre><code class=\"hljs language-bash\">curl -LO <span class=\"hljs-string\">\"https://dl.k8s.io/release/<span class=\"hljs-subst\">$(curl -L -s https://dl.k8s.io/release/stable.txt)</span>/bin/linux/&#x3C;arch>/kubectl\"</span>\n</code></pre>\n<p>where <code>&#x3C;arch></code> is your architecture, e.g. <code>arm64</code> or <code>amd64</code></p>\n<p>Then install downloaded <code>kubectl</code>:</p>\n<pre><code class=\"hljs language-bash\">sudo install -o root -g root -m 0755 kubectl /usr/local/bin/kubectl\n</code></pre>\n<p>Check if installation completed successfully:</p>\n<pre><code class=\"hljs language-bash\">kubectl version --client\n<span class=\"hljs-comment\"># or</span>\nkubectl version --client --output=yaml\n</code></pre>\n<h3>Minikube</h3>\n<p>Download <code>minikube</code> with:</p>\n<pre><code class=\"hljs language-bash\">wget https://storage.googleapis.com/minikube/releases/latest/minikube-linux-&#x3C;<span class=\"hljs-built_in\">arch</span>>64\n</code></pre>\n<p>Like with installation of <code>kubectl</code> <code>&#x3C;arch></code> defines your desired architecture, e.g. <code>arm64</code> or <code>amd64</code>.</p>\n<p>Copy downloaded minikube binary to the binaries folder:</p>\n<pre><code class=\"hljs language-bash\">sudo <span class=\"hljs-built_in\">cp</span> minikube-linux-&#x3C;<span class=\"hljs-built_in\">arch</span>>64 /usr/local/bin/minikube\n</code></pre>\n<p>Give permission to execute this binary:</p>\n<pre><code class=\"hljs language-bash\">sudo <span class=\"hljs-built_in\">chmod</span> +x /usr/local/bin/minikube\n</code></pre>\n<p>Run <code>minikube</code>:</p>\n<pre><code class=\"hljs language-bash\">minikube start\n</code></pre>\n<p>Now you can check cluster status with:</p>\n<pre><code class=\"hljs language-bash\">kubectl cluster-info\n</code></pre>\n<h3>Kubernetes GUI Dashboard</h3>\n<p>Run:</p>\n<pre><code class=\"hljs language-bash\">kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v&#x3C;tag>/aio/deploy/recommended.yaml\n</code></pre>\n<p>where <code>&#x3C;tag></code> is a required version to install.</p>\n<h3>Additional</h3>\n<p><code>Kubernetes</code> does not work correctly on systems with <code>swap</code> enabled. To disable it:</p>\n<pre><code class=\"hljs language-bash\">sudo swapoff -a\n</code></pre>\n<h2>References</h2>\n<ul>\n  <li><a href=\"https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/\">https://kubernetes.io/docs/tasks/tools/install-kubectl-linux/</a></li>\n</ul>\n"}},"__N_SSG":true}